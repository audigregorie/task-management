<div class="w-full px-12">
  <table>
    <thead>
      <tr>
        <th class="basis-1/12 justify-center">Status</th>
        <th class="basis-1/2 px-4">Task ({{ totalTaskCount }})</th>
        <th class="basis-4/12 justify-center">Date Created</th>
        <th class="basis-1/12 justify-center">More</th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngIf="tasks$ | async as tasks">
        <tr *ngFor="let task of tasks">
          <!-- Status -->
          <td class="flex basis-1/12 items-center justify-center">
            <ng-container *ngIf="task.status === 'open'">
              <div class="h-8 w-1 bg-red-500"></div>
            </ng-container>

            <ng-container *ngIf="task.status === 'progress'">
              <div class="h-8 w-1 bg-violet-500"></div>
            </ng-container>

            <ng-container *ngIf="task.status === 'complete'">
              <div class="h-8 w-1 bg-green-500"></div>
            </ng-container>
          </td>

          <!-- Task -->
          <td class="flex basis-1/2 flex-col gap-2">
            <p class="text-xl font-medium">{{ task.task }}</p>
            <p class="text-sm">{{ task.description }}</p>
          </td>

          <!-- Date Created -->
          <td class="flex basis-4/12 items-center justify-center">{{ task.dateCreated }}</td>

          <!-- More Options -->
          <td class="relative flex basis-1/12 items-center justify-center">
            <button (click)="toggleDropdownById(task.id)" class="pi pi-ellipsis-h text-xl"></button>

            <!-- Dropdown Menu -->
            <div *ngIf="openDropdownId === task.id" class="absolute -left-16 z-[10] mt-2 w-48 rounded border bg-white shadow-lg">
              <div class="py-1">
                <button class="flex w-full px-4 py-2 text-left text-gray-800 hover:bg-gray-200">Edit</button>
                <button (click)="deleteTask(task.id)" class="w-full px-4 py-2 text-left text-red-400 hover:bg-gray-200">Delete</button>
              </div>
            </div>
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>
</div>
